<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge"/>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="-1">
<link rel="shortcut icon" href="images/favicon.png">
<link rel="icon" href="images/favicon.png">
<title>YazFi</title>
<link rel="stylesheet" type="text/css" href="index_style.css">
<link rel="stylesheet" type="text/css" href="form_style.css">
<style>
p{font-weight:bolder}thead.collapsible-jquery{color:#fff;padding:0;width:100%;border:none;text-align:left;outline:none;cursor:pointer}td.nodata{height:30px!important;border:none!important;text-align:center!important;vertical-align:top!important;font:bolder 16px Arial!important}.SettingsTable{table-layout:fixed!important;width:745px!important;text-align:center}.SettingsTable input{text-align:center}.SettingsTable th{background-color:#1F2D35!important;background:#2F3A3E!important;border-bottom:none!important;border-top:none!important;font-size:12px!important;color:#fff!important;padding:4px!important;font-weight:bolder!important;padding:0!important}.SettingsTable th.bss{color:red!important}.SettingsTable td{padding:4px!important;word-wrap:break-word!important;overflow-wrap:break-word!important;border-right:none;border-left:none}.SettingsTable td.settingname{border-right:solid 1px #000;background-color:#1F2D35!important;background:#2F3A3E!important;font-weight:bolder!important}.SettingsTable td.settingvalue{border-right:solid 1px #000}.SettingsTable th:first-child{border-left:none!important}.SettingsTable th:last-child{border-right:none!important}.SettingsTable .invalid{background-color:#8b0000!important}.SettingsTable .disabled{background-color:#CCC!important;color:#888!important}.SettingsTable label{margin-right:10px!important;vertical-align:top!important}div.sortTableContainer{height:150px;overflow-y:scroll;width:745px}.sortTable{table-layout:fixed!important;border:none}thead.sortTableHeader th{background-image:linear-gradient(#92a0a5 0%,#66757c 100%);border-top:none!important;border-left:none!important;border-right:none!important;border-bottom:1px solid #000!important;font-weight:bolder;padding:2px;text-align:center;color:#fff;position:sticky;top:0;font-size:11px!important}thead.sortTableHeader th:first-child,thead.sortTableHeader th:last-child{border-right:none!important}thead.sortTableHeader th:first-child,thead.sortTableHeader td:first-child{border-left:none!important}tbody.sortTableContent td{border-bottom:1px solid #000!important;border-left:none!important;border-right:1px solid #000!important;border-top:none!important;padding:2px;text-align:center;overflow:hidden!important;white-space:nowrap!important;font-size:12px!important}tbody.sortTableContent tr.sortRow:nth-child(odd) td{background-color:#2F3A3E!important}tbody.sortTableContent tr.sortRow:nth-child(even) td{background-color:#475A5F!important}th.sortable{cursor:pointer}tbody.sortTableContent td a{text-decoration:underline!important}
</style>
<script language="JavaScript" type="text/javascript" src="/js/jquery.js"></script>
<script language="JavaScript" type="text/javascript" src="/js/httpApi.js"></script>
<script language="JavaScript" type="text/javascript" src="/ext/shared-jy/d3.js"></script>
<script language="JavaScript" type="text/javascript" src="/state.js"></script>
<script language="JavaScript" type="text/javascript" src="/general.js"></script>
<script language="JavaScript" type="text/javascript" src="/popup.js"></script>
<script language="JavaScript" type="text/javascript" src="/help.js"></script>
<script language="JavaScript" type="text/javascript" src="/ext/shared-jy/detect.js"></script>
<script language="JavaScript" type="text/javascript" src="/tmhist.js"></script>
<script language="JavaScript" type="text/javascript" src="/tmmenu.js"></script>
<script language="JavaScript" type="text/javascript" src="/client_function.js"></script>
<script language="JavaScript" type="text/javascript" src="/validator.js"></script>
<script language="JavaScript" type="text/javascript" src="/base64.js"></script>
<script>

/**----------------------------------------**/
/** Modified by Martinski W. [2024-Aug-19] **/
/**----------------------------------------**/

var custom_settings;
function LoadCustomSettings(){
	custom_settings = <% get_custom_settings(); %>;
	for(var prop in custom_settings){
		if (Object.prototype.hasOwnProperty.call(custom_settings,prop)){
			if (prop.indexOf('yazfi') !== -1 && prop.indexOf('yazfi_version') === -1){
				eval('delete custom_settings.'+prop);
			}
		}
	}
}

function jy_checkIPConflict(CompareItem,sourceIP,sourceMask,compareIP,compareMask){
	var SetIPConflictAttr = function(){
		this.state = false;
		this.ipAddr = '';
		this.mask = '';
		this.netRangeStart = '';
		this.netRangeEnd = '';
		this.netLegalRangeStart = '';
		this.netLegalRangeEnd = '';
	};
	var ipConflict = new SetIPConflictAttr();
	var calculatorNetworkSegmentRange = function(compareIP,compareMask){
		var gatewayIPArray = compareIP.split('.');
		var netMaskArray = compareMask.split('.');
		var ipPoolStartArray = new Array();
		var ipPoolEndArray = new Array();
		var ipActualRange = '';
		var ipLegalRange = '';
		ipPoolStartArray[0] = (gatewayIPArray[0] & 0xFF) & (netMaskArray[0] & 0xFF);
		ipPoolStartArray[1] = (gatewayIPArray[1] & 0xFF) & (netMaskArray[1] & 0xFF);
		ipPoolStartArray[2] = (gatewayIPArray[2] & 0xFF) & (netMaskArray[2] & 0xFF);
		ipPoolStartArray[3] = (gatewayIPArray[3] & 0xFF) & (netMaskArray[3] & 0xFF);
		ipPoolEndArray[0] = (gatewayIPArray[0] & 0xFF) | (~netMaskArray[0] & 0xFF);
		ipPoolEndArray[1] = (gatewayIPArray[1] & 0xFF) | (~netMaskArray[1] & 0xFF);
		ipPoolEndArray[2] = (gatewayIPArray[2] & 0xFF) | (~netMaskArray[2] & 0xFF);
		ipPoolEndArray[3] = (gatewayIPArray[3] & 0xFF) | (~netMaskArray[3] & 0xFF);
		ipActualRange = ipPoolStartArray[0]+'.'+ipPoolStartArray[1]+'.'+ipPoolStartArray[2]+'.'+ipPoolStartArray[3]+'>' +
		ipPoolEndArray[0]+'.'+ipPoolEndArray[1]+'.'+ipPoolEndArray[2]+'.'+ipPoolEndArray[3];
		ipLegalRange = ipPoolStartArray[0]+'.'+ipPoolStartArray[1]+'.'+ipPoolStartArray[2]+'.'+(ipPoolStartArray[3]+1)+'>' +
		ipPoolEndArray[0]+'.'+ipPoolEndArray[1]+'.'+ipPoolEndArray[2]+'.'+(ipPoolEndArray[3] - 1);
		return ipActualRange+'>'+ipLegalRange;
	};
	var checkRangeConflict = function(sourceRangeStart,sourceRangeEnd,compareRangeStart,compareRangeEnd){
		var sourceNetStartNum = inet_network(sourceRangeStart);
		var sourceNetEndNum = inet_network(sourceRangeEnd);
		var compareNetStartNum = inet_network(compareRangeStart);
		var compareNetEndNum = inet_network(compareRangeEnd);
		if( (sourceNetStartNum >= compareNetStartNum && sourceNetStartNum <= compareNetEndNum) || //case 1
		(sourceNetEndNum >= compareNetStartNum && sourceNetEndNum <= compareNetEndNum) || //case 2
		(sourceNetStartNum <= compareNetStartNum && sourceNetStartNum <= compareNetEndNum && //case 3
		sourceNetEndNum >= compareNetStartNum && sourceNetEndNum >= compareNetEndNum) ){
			return true;
		}
		else{
			return false;
		}
	};
	var setIPConflictValue = function(compareIP,compareMask,sourceIP,sourceMask){
		var compareNetRangeArray = '';
		var sourceNetRangeArray = '';
		ipConflict.ipAddr = compareIP;
		ipConflict.mask = compareMask;
		compareNetRangeArray = calculatorNetworkSegmentRange(ipConflict.ipAddr,ipConflict.mask).split('>');
		ipConflict.netRangeStart = compareNetRangeArray[0];
		ipConflict.netRangeEnd = compareNetRangeArray[1];
		ipConflict.netLegalRangeStart = compareNetRangeArray[2];
		ipConflict.netLegalRangeEnd = compareNetRangeArray[3];
		sourceNetRangeArray = calculatorNetworkSegmentRange(sourceIP,sourceMask).split('>');
		ipConflict.state = checkRangeConflict(sourceNetRangeArray[0],sourceNetRangeArray[1],ipConflict.netRangeStart,ipConflict.netRangeEnd);
	};
	var iSourceIndex = 0;
	if(CompareItem.search('VLAN') !== -1){
		iSourceIndex = parseInt(CompareItem.substring(4,5));
		CompareItem = CompareItem.substring(0,4);
	}
	if(CompareItem.search('subnet') !== -1){
		iSourceIndex = parseInt(CompareItem.substring(6,7));
		CompareItem = CompareItem.substring(0,6).toUpperCase();
	}
	switch(CompareItem){
		case 'WAN':
			var wanIP = wanlink_ipaddr();
			var wanMask = wanlink_netmask();
			if(wanIP != '0.0.0.0' && wanIP != '' && wanMask != '0.0.0.0' && wanMask != ''){
				setIPConflictValue(wanIP,wanMask,sourceIP,sourceMask);
			}
		break;
		case 'LAN':
			setIPConflictValue('<% nvram_get("lan_ipaddr"); %>', '<% nvram_get("lan_netmask"); %>', sourceIP, sourceMask);
			break;
			case 'PPTP':
			var pptpIP = '<% nvram_get("pptpd_clients"); %>';
			pptpIP = pptpIP.split('-')[0];
			setIPConflictValue(pptpIP,'255.255.255.0',sourceIP,sourceMask);
		break;
		case 'OpenVPN':
			setIPConflictValue('<% nvram_get("vpn_server_sn"); %>', '<% nvram_get("vpn_server_nm"); %>', sourceIP, sourceMask);
		break;
		case 'VLAN':
			var subnet_rulelist_array = decodeURIComponent("<% nvram_char_to_ascii("","subnet_rulelist"); %>");
			var subnet_rulelist_row = subnet_rulelist_array.split('<');
			var subnet_rulelist_col = subnet_rulelist_row[iSourceIndex].split('>');
			var vlanIP = subnet_rulelist_col[1];
			var vlanMask = subnet_rulelist_col[2];
			setIPConflictValue(vlanIP,vlanMask,sourceIP,sourceMask);
		break;
		case 'SUBNET':
			var gatewayIP = '';
			var netMask = '';
			if(tagged_based_vlan){
				gatewayIP = compareIP;
				netMask = compareMask;
			}
			else{
				var subnet_rulelist_array = decodeURIComponent("<% nvram_char_to_ascii("","subnet_rulelist"); %>");
				var subnet_rulelist_row = subnet_rulelist_array.split('<');
				for(var i = 1; i < subnet_rulelist_row.length; i++){
					var subnet_rulelist_col = subnet_rulelist_row[i].split('>');
					if(subnet_rulelist_col[0].substring(6,7) == iSourceIndex){
						gatewayIP = subnet_rulelist_col[1];
						netMask = subnet_rulelist_col[2];
					}
				}
			}
			setIPConflictValue(gatewayIP,netMask,sourceIP,sourceMask);
		break;
		default:
			setIPConflictValue(compareIP,compareMask,sourceIP,sourceMask);
		break;
	}
	return ipConflict;
}

var clientswl01=[],sortnamewl01="Hostname",sortdirwl01="asc",clientswl02=[],sortnamewl02="Hostname",sortdirwl02="asc",clientdwl03=[],sortnamewl03="Hostname",sortdirwl03="asc",clientswl11=[],sortnamewl11="Hostname",sortdirwl11="asc",clientswl12=[],sortnamewl12="Hostname",sortdirwl12="asc",clientswl13=[],sortnamewl13="Hostname",sortdirwl13="asc",clientswl21=[],sortnamewl21="Hostname",sortdirwl21="asc",clientswl22=[],sortnamewl22="Hostname",sortdirwl22="asc",clientswl23=[],sortnamewl23="Hostname",sortdirwl23="asc",clientswl31=[],sortnamewl31="Hostname",sortdirwl31="asc",clientswl32=[],sortnamewl32="Hostname",sortdirwl32="asc",clientswl33=[],sortnamewl33="Hostname",sortdirwl33="asc",tout,numOfBands=0,failedfields=[];let theProductID='<% nvram_get("productid"); %>';theProductID=theProductID.toUpperCase();const theDHCPLeaseTime={uiLabel:"DHCP Lease",varType:"dhcpLEASE",varName:"dhcplease",minVal:120,minStr:"2 minutes",maxVal:7776e3,maxStr:"90 days",infiniteTag:"I",errorMsg:function(){return`Value is not between ${this.minVal} and ${this.maxVal} seconds (${this.minStr} to ${this.maxStr}).`},hintMsg:function(){return`DHCP Lease Time in seconds: ${this.minVal} (${this.minStr}) to ${this.maxVal} (${this.maxStr}). A single '0' or 'I' indicates an "infinite" lease time.`},ValidateLeaseValue:function(e){let t,a,i,n;const l=/^[0-9]{1,7}$/;if("0"==e||e==this.infiniteTag)return!0;if(/^0+/.test(e))return!1;if(l.test(e))t="s",i=e;else{if(!/^[0-9]{1,6}[smhdw]{1}$/.test(e))return!1;{let a=e.length;t=e.substring(a-1,a),i=e.substring(0,a-1)}}switch(t){case"s":a=1;break;case"m":a=60;break;case"h":a=3600;break;case"d":a=86400;break;case"w":a=604800;break}return!!l.test(i)&&(n=i*a,!(n<this.minVal||n>this.maxVal))},ValidateLeaseInput:function(e,t){const a=e.value,i=t.keyCode?t.keyCode:t.which;return!!validator.isFunctionButton(t)||a!=this.infiniteTag&&(73==i&&0==a.length||(i>47&&i<58&&(0==a.length||"0"!=a.charAt(0)||48!=i)||(!(!(a.length>0&&"0"!=a.charAt(0)&&/^[0-9]{1,6}$/.test(a))||115!=i&&109!=i&&104!=i&&100!=i&&119!=i)||!(!t.metaKey||65!=i&&67!=i&&86!=i&&88!=i&&97!=i&&99!=i&&118!=i&&120!=i))))}},theDHCPStart={uiLabel:"DHCP Start",varType:"dhcpSTART",varName:"dhcpstart",minVal:2,maxVal:253,errorMsg1:"DHCP Start is greater than or equal to DHCP End",errorMsg2:function(){return`Value is not between ${this.minVal} and ${this.maxVal}`},hintMsg:function(){return`Start of DHCP pool (${this.minVal}-${this.maxVal})`}},theDHCPEnd={uiLabel:"DHCP End",varType:"dhcpEND",varName:"dhcpend",minVal:3,maxVal:254,errorMsg1:"DHCP End is less than or equal to DHCP Start",errorMsg2:function(){return`Value is not between ${this.minVal} and ${this.maxVal}`},hintMsg:function(){return`End of DHCP pool (${this.minVal}-${this.maxVal})`}},listOfGUIFieldNames=["enabled","ipaddr",theDHCPStart.varName,theDHCPEnd.varName,theDHCPLeaseTime.varName,"dns1","dns2","vpnclientnumber","allowinternet","forcedns","redirectalltovpn","onewaytoguest","twowaytoguest","clientisolation"],band_24GHz="24G",band_5GHz_1="5G_1",band_5GHz_2="5G_2",band_6GHz_1="6G_1",band_6GHz_2="6G_2",theGuestNet={numOfGNsPerBand:3,listOfBandIFtags:[["wl01","wl02","wl03"],["wl11","wl12","wl13"],["wl21","wl22","wl23"],["wl31","wl32","wl33"]],wifiBands:[{uiLabel:"2.4GHz",bandType:band_24GHz,IFnamePrefix:function(){return"GT-BE98"==theProductID||"GT-BE98_PRO"==theProductID||"GT-AXE16000"==theProductID?"wl3":"wl0"},isSupported:function(){return"undefined"==typeof wl_info||null==wl_info?band2g_support:wl_info.band2g_support}},{uiLabel:"5GHz",bandType:band_5GHz_1,IFnamePrefix:function(){return"GT-BE98"==theProductID||"GT-BE98_PRO"==theProductID||"GT-AXE16000"==theProductID?"wl0":"wl1"},isSupported:function(){return"undefined"==typeof wl_info||null==wl_info?band5g_support:wl_info.band5g_support}},{uiLabel:"5GHz-2",bandType:band_5GHz_2,IFnamePrefix:function(){return"GT-BE98"==theProductID||"GT-AXE16000"==theProductID?"wl1":"wl2"},isSupported:function(){return"undefined"==typeof wl_info||null==wl_info?band5g2_support:wl_info.band5g_2_support}},{uiLabel:"6GHz",bandType:band_6GHz_1,IFnamePrefix:function(){return"GT-BE98_PRO"==theProductID?"wl1":"wl2"},isSupported:function(){return"undefined"==typeof wl_info||null==wl_info?band6g_support:void 0!==wl_info.band6g_support&&wl_info.band6g_support}},{uiLabel:"6GHz-2",bandType:band_6GHz_2,IFnamePrefix:function(){return"GT-BE98_PRO"==theProductID?"wl2":null},isSupported:function(){return"undefined"!=typeof wl_info&&null!=wl_info&&void 0!==wl_info.band6g_2_support&&wl_info.band6g_2_support}}],IFacePrefix:function(e){let t="";for(var a=0;a<this.wifiBands.length;a++)if(this.wifiBands[a].isSupported()&&e==this.wifiBands[a].bandType){t=this.wifiBands[a].IFnamePrefix();break}return t},IFaceUILabel:function(e){let t="";for(var a=0;a<this.wifiBands.length;a++)if(this.wifiBands[a].isSupported()&&e==this.wifiBands[a].bandType){t=this.wifiBands[a].uiLabel;break}return t},UILabelFromPrefix:function(e){let t="";for(var a=0;a<this.wifiBands.length;a++)if(this.wifiBands[a].isSupported()&&e==this.wifiBands[a].IFnamePrefix()){t=this.wifiBands[a].uiLabel;break}return t}};function AddFailedField(e,t){let a=!1;for(var i=0;i<failedfields.length;i++)if(failedfields[i][1]==t&&failedfields[i][0].attr("name")==e.name){a=!0;break}return!a&&(failedfields.push([$(e),t]),!0)}function initial(){SetCurrentPage(),LoadCustomSettings(),show_menu(),get_conf_file(),ScriptUpdateLayout(),document.formScriptActions.action_script.value="start_YazFiconnectedclients",document.formScriptActions.submit(),tout=setTimeout(get_connected_clients_file,5e3)}function YazHint(e){for(var t=document.getElementsByTagName("a"),a=0;a<t.length;a++)t[a].onmouseout=nd;return hinttext="My text goes here",1==e&&(hinttext="Enable YazFi for this Guest Network"),2==e&&(hinttext="IP address/subnet to use for Guest Network"),3==e&&(hinttext=theDHCPStart.hintMsg()),4==e&&(hinttext=theDHCPEnd.hintMsg()),5==e&&(hinttext=theDHCPLeaseTime.hintMsg()),6==e&&(hinttext="IP address for primary DNS resolver"),7==e&&(hinttext="IP address for secondary DNS resolver"),8==e&&(hinttext="Should Guest Network DNS requests be forced/redirected to DNS1? N.B. This setting is ignored if sending to VPN, and VPN Client's DNS configuration is Exclusive"),9==e&&(hinttext="Should Guest Network be allowed to access the internet?"),10==e&&(hinttext="Should Guest Network traffic be sent via VPN?"),11==e&&(hinttext="The number of the VPN Client to send traffic through (1-5)"),12==e&&(hinttext="Should LAN/Guest Network traffic have unrestricted access to each other? Cannot be enabled if _ONEWAYTOGUEST is enabled"),13==e&&(hinttext="Should LAN be able to initiate connections to Guest Network clients (but not the opposite)? Cannot be enabled if _TWOWAYTOGUEST is enabled"),14==e&&(hinttext="Should Guest Network radio prevent clients from talking to each other?"),overlib(hinttext,0,0)}function OptionsEnableDisable(forminput){var inputname=forminput.name,inputvalue=forminput.value,prefix=inputname.substring(0,inputname.lastIndexOf("_")),fieldnames=["ipaddr",theDHCPStart.varName,theDHCPEnd.varName,theDHCPLeaseTime.varName,"dns1","dns2","vpnclientnumber"],fieldnames2=["allowinternet","forcedns","redirectalltovpn","onewaytoguest","twowaytoguest","clientisolation"];if("false"==inputvalue){for(var index=0;index<fieldnames.length;index++)$("input[name="+prefix+"_"+fieldnames[index]+"]").addClass("disabled"),$("input[name="+prefix+"_"+fieldnames[index]+"]").prop("disabled",!0);for(var index=0;index<fieldnames2.length;index++)$("input[name="+prefix+"_"+fieldnames2[index]+"]").prop("disabled",!0)}else if("true"==inputvalue){for(var index=0;index<fieldnames.length;index++)"dns2"!=fieldnames2[index]&&"vpnclientnumber"!=fieldnames2[index]&&($("input[name="+prefix+"_"+fieldnames[index]+"]").removeClass("disabled"),$("input[name="+prefix+"_"+fieldnames[index]+"]").prop("disabled",!1));for(var index=0;index<fieldnames2.length;index++)$("input[name="+prefix+"_"+fieldnames2[index]+"]").prop("disabled",!1);"true"==eval("document.form."+prefix+"_redirectalltovpn").value&&($("input[name="+prefix+"_vpnclientnumber]").removeClass("disabled"),$("input[name="+prefix+"_vpnclientnumber]").prop("disabled",!1)),"false"==eval("document.form."+prefix+"_forcedns").value&&($("input[name="+prefix+"_dns2]").removeClass("disabled"),$("input[name="+prefix+"_dns2]").prop("disabled",!1)),"false"==eval("document.form."+prefix+"_allowinternet").value&&($("input[name="+prefix+"_redirectalltovpn]").addClass("disabled"),$("input[name="+prefix+"_redirectalltovpn]").prop("disabled",!0),$("input[name="+prefix+"_vpnclientnumber]").addClass("disabled"),$("input[name="+prefix+"_vpnclientnumber]").prop("disabled",!0),Validate_IP(eval("document.form."+prefix+"_dns1"),"DNS"),Validate_IP(eval("document.form."+prefix+"_dns2"),"DNS"))}}function SubOptionsEnableDisable(forminput,optiontype){var inputname=forminput.name,inputvalue=forminput.value,prefix=inputname.substring(0,inputname.lastIndexOf("_"));"true"==eval("document.form."+prefix+"_enabled").value&&("false"==inputvalue?"vpn"==optiontype?($("input[name="+prefix+"_vpnclientnumber]").addClass("disabled"),$("input[name="+prefix+"_vpnclientnumber]").prop("disabled",!0)):"dns"==optiontype?($("input[name="+prefix+"_dns2]").removeClass("disabled"),$("input[name="+prefix+"_dns2]").prop("disabled",!1)):"allowinternet"==optiontype&&($("input[name="+prefix+"_redirectalltovpn]").addClass("disabled"),$("input[name="+prefix+"_redirectalltovpn]").prop("disabled",!0),$("input[name="+prefix+"_vpnclientnumber]").addClass("disabled"),$("input[name="+prefix+"_vpnclientnumber]").prop("disabled",!0),Validate_IP(eval("document.form."+prefix+"_dns1"),"DNS"),Validate_IP(eval("document.form."+prefix+"_dns2"),"DNS")):"true"==inputvalue&&("vpn"==optiontype?($("input[name="+prefix+"_vpnclientnumber]").removeClass("disabled"),$("input[name="+prefix+"_vpnclientnumber]").prop("disabled",!1)):"dns"==optiontype?($("input[name="+prefix+"_dns2]").val($("input[name="+prefix+"_dns1]").val()),$("input[name="+prefix+"_dns2]").addClass("disabled"),$("input[name="+prefix+"_dns2]").prop("disabled",!0)):"allowinternet"==optiontype&&($("input[name="+prefix+"_redirectalltovpn]").removeClass("disabled"),$("input[name="+prefix+"_redirectalltovpn]").prop("disabled",!1),$("input[name="+prefix+"_vpnclientnumber]").removeClass("disabled"),$("input[name="+prefix+"_vpnclientnumber]").prop("disabled",!1),Validate_IP(eval("document.form."+prefix+"_dns1"),"DNS"),Validate_IP(eval("document.form."+prefix+"_dns2"),"DNS"))))}function Validate_IP(forminput,iptype){var inputvalue=forminput.value,inputname=forminput.name;let errorMsg;var prefix=inputname.substring(0,inputname.lastIndexOf("_"));if("DNS"==iptype&&".0"==inputvalue.substring(inputvalue.lastIndexOf("."))&&(forminput.value=inputvalue.substring(0,inputvalue.lastIndexOf("."))+".1"),/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(inputvalue)){if("DNS"!=iptype){var fixedip=inputvalue.substring(0,inputvalue.lastIndexOf("."))+".0";if($(forminput).val(fixedip),/(^10\.)|(^172\.1[6-9]\.)|(^172\.2[0-9]\.)|(^172\.3[0-1]\.)|(^192\.168\.)/.test(fixedip)){if(jy_checkIPConflict("LAN",fixedip,"255.255.255.0",document.form.lan_ipaddr.value,document.form.lan_netmask.value).state)return errorMsg="LAN IP conflict",$(forminput).addClass("invalid"),AddFailedField(forminput,errorMsg)&&forminput.focus(),$(forminput).on("mouseover",(function(){return overlib(errorMsg,0,0)})),$(forminput)[0].onmouseout=nd,!1;matchfound=!1;for(var i=0;i<numOfBands;i++)for(var i2=1;i2<=theGuestNet.numOfGNsPerBand;i2++)"yazfi_wl"+i.toString()+i2.toString()+"_ipaddr"!=inputname&&eval("document.form.yazfi_wl"+i.toString()+i2.toString()+"_ipaddr.value")==fixedip&&(matchfound=!0);return matchfound?(errorMsg="Conflict with another YazFi network",$(forminput).addClass("invalid"),AddFailedField(forminput,errorMsg)&&forminput.focus(),$(forminput).on("mouseover",(function(){return overlib(errorMsg,0,0)})),$(forminput)[0].onmouseout=nd,!1):($(forminput).removeClass("invalid"),$(forminput).off("mouseover"),!0)}return errorMsg="Not a private IP address",$(forminput).addClass("invalid"),AddFailedField(forminput,errorMsg)&&forminput.focus(),$(forminput).on("mouseover",(function(){return overlib(errorMsg,0,0)})),$(forminput)[0].onmouseout=nd,!1}return"DNS"!=iptype||/(^10\.)|(^172\.1[6-9]\.)|(^172\.2[0-9]\.)|(^172\.3[0-1]\.)|(^192\.168\.)/.test(inputvalue)||"false"!=eval("document.form."+prefix+"_allowinternet.value")?($(forminput).removeClass("invalid"),$(forminput).off("mouseover"),!0):(errorMsg="Allow internet disabled and non-private IP address used",$(forminput).addClass("invalid"),AddFailedField(forminput,errorMsg)&&forminput.focus(),$(forminput).on("mouseover",(function(){return overlib(errorMsg,0,0)})),$(forminput)[0].onmouseout=nd,!1)}return errorMsg="Invalid IP Address",$(forminput).addClass("invalid"),AddFailedField(forminput,errorMsg)&&forminput.focus(),$(forminput).on("mouseover",(function(){return overlib(errorMsg,0,0)})),$(forminput)[0].onmouseout=nd,!1}function Validate_DHCP(forminput,dhcpType){var inputname=forminput.name,inputvalue=1*forminput.value;return dhcpType==theDHCPStart.varType?inputvalue>=1*eval("document.form."+inputname.substring(0,inputname.indexOf("start"))+"end.value")?($(forminput).addClass("invalid"),AddFailedField(forminput,theDHCPStart.errorMsg1)&&forminput.focus(),$(forminput).on("mouseover",(function(){return overlib(theDHCPStart.errorMsg1,0,0)})),$(forminput)[0].onmouseout=nd,!1):inputvalue>theDHCPStart.maxVal||inputvalue<theDHCPStart.minVal?($(forminput).addClass("invalid"),AddFailedField(forminput,theDHCPStart.errorMsg2())&&forminput.focus(),$(forminput).on("mouseover",(function(){return overlib(theDHCPStart.errorMsg2(),0,0)})),$(forminput)[0].onmouseout=nd,!1):($(forminput).removeClass("invalid"),$(forminput).off("mouseover"),!0):dhcpType==theDHCPEnd.varType?inputvalue<=1*eval("document.form."+inputname.substring(0,inputname.indexOf("end"))+"start.value")?($(forminput).addClass("invalid"),AddFailedField(forminput,theDHCPEnd.errorMsg1)&&forminput.focus(),$(forminput).on("mouseover",(function(){return overlib(theDHCPEnd.errorMsg1,0,0)})),$(forminput)[0].onmouseout=nd,!1):inputvalue>theDHCPEnd.maxVal||inputvalue<theDHCPEnd.minVal?($(forminput).addClass("invalid"),AddFailedField(forminput,theDHCPEnd.errorMsg2())&&forminput.focus(),$(forminput).on("mouseover",(function(){return overlib(theDHCPEnd.errorMsg2(),0,0)})),$(forminput)[0].onmouseout=nd,!1):($(forminput).removeClass("invalid"),$(forminput).off("mouseover"),!0):dhcpType==theDHCPLeaseTime.varType?theDHCPLeaseTime.ValidateLeaseValue(forminput.value)?($(forminput).removeClass("invalid"),$(forminput).off("mouseover"),!0):($(forminput).addClass("invalid"),AddFailedField(forminput,theDHCPLeaseTime.errorMsg())&&forminput.focus(),$(forminput).on("mouseover",(function(){return overlib(theDHCPLeaseTime.errorMsg(),0,0)})),$(forminput)[0].onmouseout=nd,!1):void 0}function Validate_VPNClientNo(e){e.name;var t=1*e.value;const a="Value not between 1 and 5";return t>5||t<1?($(e).addClass("invalid"),AddFailedField(e,a)&&e.focus(),$(e).on("mouseover",(function(){return overlib(a,0,0)})),$(e)[0].onmouseout=nd,!1):($(e).removeClass("invalid"),$(e).off("mouseover"),!0)}function Validate_OneTwoWay(forminput){var onetwo="",inputname=forminput.name,inputvalue=forminput.value;onetwo=-1!=inputname.indexOf("oneway")?"one":"two","one"==onetwo?"true"==inputvalue&&eval("document.form."+inputname.substring(0,inputname.indexOf("one"))+"twowaytoguest.value=false"):"true"==inputvalue&&eval("document.form."+inputname.substring(0,inputname.indexOf("two"))+"onewaytoguest.value=false")}function Validate_All(){var validationfailed=!1,thePrefix="";failedfields=[];for(var i=0;i<numOfBands;i++)for(var i2=1;i2<=theGuestNet.numOfGNsPerBand;i2++)thePrefix="yazfi_wl"+i+i2,"false"!=eval("document.form."+thePrefix+"_enabled").value&&(Validate_IP(eval("document.form."+thePrefix+"_ipaddr"),"IP")||(validationfailed=!0),Validate_DHCP(eval("document.form."+thePrefix+"_"+theDHCPStart.varName),theDHCPStart.varType)||(validationfailed=!0),Validate_DHCP(eval("document.form."+thePrefix+"_"+theDHCPEnd.varName),theDHCPEnd.varType)||(validationfailed=!0),Validate_DHCP(eval("document.form."+thePrefix+"_"+theDHCPLeaseTime.varName),theDHCPLeaseTime.varType)||(validationfailed=!0),Validate_IP(eval("document.form."+thePrefix+"_dns1"),"DNS")||(validationfailed=!0),Validate_IP(eval("document.form."+thePrefix+"_dns2"),"DNS")||(validationfailed=!0),Validate_VPNClientNo(eval("document.form."+thePrefix+"_vpnclientnumber"))||(validationfailed=!0));for(var failedfieldsstring="",i=0;i<failedfields.length;i++){var guestnework="",prefix=failedfields[i][0].attr("name").split("_")[1];let e=prefix.substring(0,3),t=prefix.substring(3,4);guestnetwork=theGuestNet.UILabelFromPrefix(e)+" Guest Network "+t,failedfieldsstring+=guestnetwork+" - "+failedfields[i][0].parent().parent().children().children()[0].innerHTML+" - "+failedfields[i][1]+"\n"}return!validationfailed||(alert("Validation for some fields failed, shown below. Please correct invalid values and try again.\n"+failedfieldsstring),!1)}function get_conf_file(){$.ajax({url:"/ext/YazFi/config.htm",dataType:"text",error:function(e){setTimeout(get_conf_file,1e3)},success:function(data){var settings=data.split("\n");settings.reverse(),settings=settings.filter(Boolean);let linesCount=settings.length,settingsCount=0,ifaceVarPrefix,ifacePrefix,showIFprefix,theIFprefixTag,ifaceUILabel,guestNetUILabel;window.yazfi_settings=[];for(var i=0;i<linesCount;i++){ifaceVarPrefix=settings[i].match(/^wl[0-3][1-3]_/);var commentstart=settings[i].indexOf("#");if(-1==commentstart&&null!=ifaceVarPrefix){settingsCount+=1;var setting=settings[i].split("=");window.yazfi_settings.unshift(setting)}}"undefined"==typeof wl_info||null==wl_info?(numOfBands=2,ifacePrefix=theGuestNet.IFacePrefix(band_24GHz),ifaceUILabel=theGuestNet.IFaceUILabel(band_24GHz),guestNetUILabel=`${ifaceUILabel} Guest Networks`,$("#table_config").append(BuildConfigTable(ifacePrefix,guestNetUILabel)),$("#table_config").append('<tr><td style="padding:0px;height:10px;"></td></tr>'),ifacePrefix=theGuestNet.IFacePrefix(band_5GHz_1),ifaceUILabel=theGuestNet.IFaceUILabel(band_5GHz_1),guestNetUILabel=`${ifaceUILabel} Guest Networks`,$("#table_config").append(BuildConfigTable(ifacePrefix,guestNetUILabel))):(showIFprefix=wl_info.band6g_support,wl_info.band2g_support&&(theIFprefixTag="",ifacePrefix=theGuestNet.IFacePrefix(band_24GHz),ifaceUILabel=theGuestNet.IFaceUILabel(band_24GHz),showIFprefix&&(theIFprefixTag=` [${ifacePrefix}]`),guestNetUILabel=`${ifaceUILabel}${theIFprefixTag} Guest Networks`,$("#table_config").append(BuildConfigTable(ifacePrefix,guestNetUILabel)),numOfBands+=1),wl_info.band5g_support&&(theIFprefixTag="",ifacePrefix=theGuestNet.IFacePrefix(band_5GHz_1),ifaceUILabel=theGuestNet.IFaceUILabel(band_5GHz_1),showIFprefix&&(theIFprefixTag=` [${ifacePrefix}]`),guestNetUILabel=`${ifaceUILabel}${theIFprefixTag} Guest Networks`,$("#table_config").append('<tr><td style="padding:0px;height:10px;"></td></tr>'),$("#table_config").append(BuildConfigTable(ifacePrefix,guestNetUILabel)),numOfBands+=1),wl_info.band5g_2_support&&(theIFprefixTag="",ifacePrefix=theGuestNet.IFacePrefix(band_5GHz_2),ifaceUILabel=theGuestNet.IFaceUILabel(band_5GHz_2),showIFprefix&&(theIFprefixTag=` [${ifacePrefix}]`),guestNetUILabel=`${ifaceUILabel}${theIFprefixTag} Guest Networks`,$("#table_config").append('<tr><td style="padding:0px;height:10px;"></td></tr>'),$("#table_config").append(BuildConfigTable(ifacePrefix,guestNetUILabel)),numOfBands+=1),void 0!==wl_info.band6g_support&&wl_info.band6g_support&&(theIFprefixTag="",ifacePrefix=theGuestNet.IFacePrefix(band_6GHz_1),ifaceUILabel=theGuestNet.IFaceUILabel(band_6GHz_1),showIFprefix&&(theIFprefixTag=` [${ifacePrefix}]`),guestNetUILabel=`${ifaceUILabel}${theIFprefixTag} Guest Networks`,$("#table_config").append('<tr><td style="padding:0px;height:10px;"></td></tr>'),$("#table_config").append(BuildConfigTable(ifacePrefix,guestNetUILabel)),numOfBands+=1),void 0!==wl_info.band6g_2_support&&wl_info.band6g_2_support&&(theIFprefixTag="",ifacePrefix=theGuestNet.IFacePrefix(band_6GHz_2),ifaceUILabel=theGuestNet.IFaceUILabel(band_6GHz_2),showIFprefix&&(theIFprefixTag=` [${ifacePrefix}]`),guestNetUILabel=`${ifaceUILabel}${theIFprefixTag} Guest Networks`,$("#table_config").append('<tr><td style="padding:0px;height:10px;"></td></tr>'),$("#table_config").append(BuildConfigTable(ifacePrefix,guestNetUILabel)),numOfBands+=1)),$("#table_config").append('<tr class="apply_gen" valign="top"><td style="background-color:rgb(77,89,93);border-top:0px;border-bottom:0px;height:5px;"></td></tr>');var buttonshtml='<tr class="apply_gen" valign="top" height="35px"><td style="background-color:rgb(77,89,93);border-top:0px;">';buttonshtml+='<input name="button" type="button" class="button_gen" onclick="SaveConfig();" value="Apply"/></td></tr>',$("#table_config").append(buttonshtml);for(var i=0;i<settingsCount;i++){var settingname=window.yazfi_settings[i][0].toLowerCase(),settingvalue=window.yazfi_settings[i][1];let varNameTags=settingname.split("_"),supportedBand=!1,supportedField=listOfGUIFieldNames.includes(varNameTags[1]);for(var cnt=0;cnt<numOfBands;cnt++)if(theGuestNet.listOfBandIFtags[cnt].includes(varNameTags[0])){supportedBand=!0;break}supportedBand&&supportedField&&(eval("document.form.yazfi_"+settingname).value=settingvalue,-1!=settingname.indexOf("forcedns")&&SubOptionsEnableDisable($("#yazfi_"+settingname.replace("_forcedns","")+"_fdns_"+settingvalue)[0],"dns"),-1!=settingname.indexOf("redirectalltovpn")&&SubOptionsEnableDisable($("#yazfi_"+settingname.replace("_redirectalltovpn","")+"_redir_"+settingvalue)[0],"vpn"),-1!=settingname.indexOf("allowinternet")&&SubOptionsEnableDisable($("#yazfi_"+settingname.replace("_allowinternet","")+"_allowinet_"+settingvalue)[0],"allowinternet"),-1!=settingname.indexOf("enabled")&&OptionsEnableDisable($("#yazfi_"+settingname.replace("_enabled","")+"_en_"+settingvalue)[0]))}1*$("#firmver").text()<386.1&&("RT-AX88U"!=productid&&"RT-AX3000"!=productid||($("input[name*=clientisolation][value=false]").prop("checked",!0),$("input[name*=clientisolation]").attr("disabled",!0)));for(var i=0;i<numOfBands;i++)for(var i2=1;i2<=theGuestNet.numOfGNsPerBand;i2++)0==eval("document.form.wl"+i+i2+"_bss_enabled").value&&(OptionsEnableDisable($("#yazfi_wl"+i+i2+"_en_false")[0]),$("input[name=yazfi_wl"+i+i2+"_enabled]").prop("disabled",!0))}})}function get_connected_clients_file(){d3.csv("/ext/YazFi/connectedclients.htm").then((function(data){if(data.length>0){for(var unique=[],YazFiInterfaces=[],i=0;i<data.length;i++)unique[data[i].INTERFACE]||(YazFiInterfaces.push(data[i].INTERFACE.replace(".","")),unique[data[i].INTERFACE]=1);$("#table_connectedclients").empty();for(var i=0;i<numOfBands;i++)for(var i2=1;i2<=theGuestNet.numOfGNsPerBand;i2++)YazFiInterface="wl"+i.toString()+i2.toString(),window["clients"+YazFiInterface]=data.filter((function(e){return e.INTERFACE.replace(".","")==YazFiInterface})).map((function(e){return{Hostname:e.HOSTNAME,IPAddress:e.IP,MACAddress:e.MAC,Connected:e.CONNECTED,Rx:e.RX,Tx:e.TX,RSSI:e.RSSI,PHY:e.PHY}})),"true"==eval("document.form.yazfi_"+YazFiInterface+"_enabled.value")&&1==eval("document.form."+YazFiInterface+"_bss_enabled.value")&&($("#table_connectedclients").append(BuildConnectedClientPlaceholderTable(YazFiInterface,eval("document.form."+YazFiInterface+"_ssid.value"))),window["clients"+YazFiInterface].length>0&&"NOCLIENTS"!=window["clients"+YazFiInterface][0].IPAddress?SortTable("sortTable"+YazFiInterface,"clients"+YazFiInterface,eval("sortname"+YazFiInterface)+" "+eval("sortdir"+YazFiInterface).replace("desc","↑").replace("asc","↓").trim(),"sortname"+YazFiInterface,"sortdir"+YazFiInterface):($("#sortTable"+YazFiInterface).css("height","30px"),$("#sortTable"+YazFiInterface).css("overflow-y","hidden"),$("#sortTable"+YazFiInterface).append(BuildConnectedClientsTableNoData("sortTable"+YazFiInterface))))}document.getElementById("auto_refresh").checked&&(document.formScriptActions.action_script.value="start_YazFiconnectedclients",document.formScriptActions.submit(),tout=setTimeout(get_connected_clients_file,5e3)),AddEventHandlers()})).catch((function(){tout=setTimeout(get_connected_clients_file,1e3)}))}function SortTable(tableid,arrayid,sorttext,sortname,sortdir){window[sortname]=sorttext.replace("↑","").replace("↓","").trim();var sorttype="string",sortfield=window[sortname];switch(window[sortname]){case"Connected":sorttype="time";break;case"Rx":case"Tx":case"RSSI":sorttype="number";break}"string"==sorttype?-1==sorttext.indexOf("↓")&&-1==sorttext.indexOf("↑")||-1!=sorttext.indexOf("↓")?(eval(arrayid+" = "+arrayid+".sort((a,b) => (a."+sortfield+".toLowerCase() > b."+sortfield+".toLowerCase()) ? 1 : ((b."+sortfield+".toLowerCase() > a."+sortfield+".toLowerCase()) ? -1 : 0));"),window[sortdir]="asc"):(eval(arrayid+" = "+arrayid+".sort((a,b) => (a."+sortfield+".toLowerCase() < b."+sortfield+".toLowerCase()) ? 1 : ((b."+sortfield+".toLowerCase() < a."+sortfield+".toLowerCase()) ? -1 : 0));"),window[sortdir]="desc"):"number"==sorttype?-1==sorttext.indexOf("↓")&&-1==sorttext.indexOf("↑")||-1!=sorttext.indexOf("↓")?(eval(arrayid+" = "+arrayid+".sort((a,b) => parseFloat(a."+sortfield+'.replace("m","000")) - parseFloat(b.'+sortfield+'.replace("m","000")));'),window[sortdir]="asc"):(eval(arrayid+" = "+arrayid+".sort((a,b) => parseFloat(b."+sortfield+'.replace("m","000")) - parseFloat(a.'+sortfield+'.replace("m","000")));'),window[sortdir]="desc"):"time"==sorttype&&(-1==sorttext.indexOf("↓")&&-1==sorttext.indexOf("↑")||-1!=sorttext.indexOf("↓")?(eval(arrayid+" = "+arrayid+".sort((a,b) => parseFloat(HHMMSStoS(a."+sortfield+'.replace("m","000"))) - parseFloat(HHMMSStoS(b.'+sortfield+'.replace("m","000"))));'),window[sortdir]="asc"):(eval(arrayid+" = "+arrayid+".sort((a,b) => parseFloat(HHMMSStoS(b."+sortfield+'.replace("m","000"))) - parseFloat(HHMMSStoS(a.'+sortfield+'.replace("m","000"))));'),window[sortdir]="desc")),$("#"+tableid).empty(),$("#"+tableid).append(BuildConnectedClientsTable(tableid.replace("sortTable",""))),$("#"+tableid).find(".sortable").each((function(e,t){t.innerHTML.replace(/ \(.*\)/,"").replace(" ","")==window[sortname]&&("asc"==window[sortdir]?t.innerHTML=t.innerHTML+" ↑":t.innerHTML=t.innerHTML+" ↓")}))}function BuildConnectedClientPlaceholderTable(e,t){var a='<div style="line-height:10px;">&nbsp;</div>';return a+='<tr><td style="padding:0px;">',a+='<table width="100%" border="1" align="center" cellpadding="4" cellspacing="0" bordercolor="#6b8fa3" class="FormTable" id="table_clients_'+e+'">',a+='<thead class="collapsible-jquery" id="thead_clients_'+e+'">',a+="<tr>",a+="<td>"+t+" (click to expand/collapse)</td>",a+="</tr>",a+="</thead>",a+="<tr>",a+='<td style="padding:0px;">',a+='<div id="sortTable'+e+'" class="sortTableContainer" style="height:150px;"></div>',a+="</td>",a+="</tr>",a+="</table>",a+="</td>",a+="</tr>"}function BuildConnectedClientsTableNoData(){return"<tr>",'<td class="nodata">',"No connected clients","</td>","</tr>","</table>",'<table width="100%" border="1" align="center" cellpadding="4" cellspacing="0" bordercolor="#6b8fa3" class="sortTable"><tr><td class="nodata">No connected clients</td></tr></table>'}function BuildConnectedClientsTable(e){var t='<table border="0" cellpadding="0" cellspacing="0" width="100%" class="sortTable">';t+='<col style="width:150px;">',t+='<col style="width:100px;">',t+='<col style="width:100px;">',t+='<col style="width:60px;">',t+='<col style="width:60px;">',t+='<col style="width:65px;">',t+='<col style="width:60px;">',t+='<col style="width:40px;">',t+='<thead class="sortTableHeader">',t+="<tr>",t+='<th class="sortable" onclick="SortTable(\'sortTable'+e+"','clients"+e+"',this.innerHTML.replace(/ \\(.*\\)/,''),'sortname"+e+"','sortdir"+e+"')\">Hostname</th>",t+='<th class="sortable" onclick="SortTable(\'sortTable'+e+"','clients"+e+"',this.innerHTML.replace(/ \\(.*\\)/,'').replace(' ',''),'sortname"+e+"','sortdir"+e+"')\">IP Address</th>",t+='<th class="sortable" onclick="SortTable(\'sortTable'+e+"','clients"+e+"',this.innerHTML.replace(/ \\(.*\\)/,'').replace(' ',''),'sortname"+e+"','sortdir"+e+"')\">MAC Address</th>",t+='<th class="sortable" onclick="SortTable(\'sortTable'+e+"','clients"+e+"',this.innerHTML.replace(/ \\(.*\\)/,''),'sortname"+e+"','sortdir"+e+"')\">Connected</th>",t+='<th class="sortable" onclick="SortTable(\'sortTable'+e+"','clients"+e+"',this.innerHTML.replace(/ \\(.*\\)/,''),'sortname"+e+"','sortdir"+e+"')\">Rx (Mbps)</th>",t+='<th class="sortable" onclick="SortTable(\'sortTable'+e+"','clients"+e+"',this.innerHTML.replace(/ \\(.*\\)/,''),'sortname"+e+"','sortdir"+e+"')\">Tx (Mbps)</th>",t+='<th class="sortable" onclick="SortTable(\'sortTable'+e+"','clients"+e+"',this.innerHTML.replace(/ \\(.*\\)/,''),'sortname"+e+"','sortdir"+e+"')\">RSSI (dBm)</th>",t+='<th class="sortable" onclick="SortTable(\'sortTable'+e+"','clients"+e+"',this.innerHTML.replace(/ \\(.*\\)/,''),'sortname"+e+"','sortdir"+e+"')\">PHY</th>",t+="</tr>",t+="</thead>",t+='<tbody class="sortTableContent">';for(var a=0;a<window["clients"+e].length;a++)t+='<tr class="sortRow">',t+="<td>"+window["clients"+e][a].Hostname+"</td>",t+="<td>"+window["clients"+e][a].IPAddress+"</td>",t+="<td>"+window["clients"+e][a].MACAddress+"</td>",t+="<td>"+StoHHMMSS(window["clients"+e][a].Connected)+"</td>",t+="<td>"+window["clients"+e][a].Rx+"</td>",t+="<td>"+window["clients"+e][a].Tx+"</td>",t+="<td>"+window["clients"+e][a].RSSI+"</td>",t+="<td>"+window["clients"+e][a].PHY+"</td>",t+="</tr>";return t+="</tbody>",t+="</table>"}function BuildConfigTable(prefix,title){var tablehtml='<tr><td style="padding:0px;">';tablehtml+='<table width="100%" border="1" align="center" cellpadding="4" cellspacing="0" bordercolor="#6b8fa3" class="FormTable" id="table_config_'+prefix+'">',tablehtml+='<thead class="collapsible-jquery" id="'+prefix+'">',tablehtml+="<tr>",tablehtml+="<td>"+title+" (click to expand/collapse)</td>",tablehtml+="</tr>",tablehtml+="</thead>",tablehtml+="<tr>",tablehtml+='<td colspan="2" align="center" style="padding:0px;">',tablehtml+='<table width="100%" border="0" align="center" cellpadding="4" cellspacing="0" bordercolor="#6b8fa3" class="FormTable SettingsTable" style="border:0px;">',tablehtml+='<col style="width:130px;">',tablehtml+='<col style="width:205px;">',tablehtml+='<col style="width:205px;">',tablehtml+='<col style="width:205px;">',tablehtml+="<thead>",tablehtml+="<tr>",tablehtml+="<th>&nbsp;</th>",tablehtml+="<th>Guest Network 1</th>",tablehtml+="<th>Guest Network 2</th>",tablehtml+="<th>Guest Network 3</th>",tablehtml+="</tr>",tablehtml+="<tr>",tablehtml+="<th>&nbsp;</th>",tablehtml+="<th>"+eval("document.form."+prefix+"1_ssid.value")+"</th>",tablehtml+="<th>"+eval("document.form."+prefix+"2_ssid.value")+"</th>",tablehtml+="<th>"+eval("document.form."+prefix+"3_ssid.value")+"</th>",tablehtml+="</tr>";var enabled1=eval("document.form."+prefix+"1_bss_enabled.value"),enabled2=eval("document.form."+prefix+"2_bss_enabled.value"),enabled3=eval("document.form."+prefix+"3_bss_enabled.value");return 0!=enabled1&&0!=enabled2&&0!=enabled3||(tablehtml+="<tr>",tablehtml+="<th>&nbsp;</th>",tablehtml+=0==enabled1?'<th class="bss">Disabled on Guest Network Tab</th>':"<th>&nbsp;</th>",tablehtml+=0==enabled2?'<th class="bss">Disabled on Guest Network Tab</th>':"<th>&nbsp;</th>",tablehtml+=0==enabled3?'<th class="bss">Disabled on Guest Network Tab</th>':"<th>&nbsp;</th>",tablehtml+="</tr>"),tablehtml+="</thead>",tablehtml+="<tr>",tablehtml+='<td class="settingname"><a class="hintstyle" href="javascript:void(0);" onclick="YazHint(1);">Enabled</a></td><td class="settingvalue"><input autocomplete="off" autocapitalize="off" type="radio" name="yazfi_'+prefix+'1_enabled" id="yazfi_'+prefix+'1_en_true" onChange="OptionsEnableDisable(this)" class="input" value="true">Yes<input autocomplete="off" autocapitalize="off" type="radio" name="yazfi_'+prefix+'1_enabled" id="yazfi_'+prefix+'1_en_false" onChange="OptionsEnableDisable(this)" class="input" value="false" checked>No</td>',tablehtml+='<td class="settingvalue"><input autocomplete="off" autocapitalize="off" type="radio" name="yazfi_'+prefix+'2_enabled" id="yazfi_'+prefix+'2_en_true" onChange="OptionsEnableDisable(this)" class="input" value="true">Yes<input autocomplete="off" autocapitalize="off" type="radio" name="yazfi_'+prefix+'2_enabled" id="yazfi_'+prefix+'2_en_false" onChange="OptionsEnableDisable(this)" class="input" value="false" checked>No</td>',tablehtml+='<td class="settingvalue"><input autocomplete="off" autocapitalize="off" type="radio" name="yazfi_'+prefix+'3_enabled" id="yazfi_'+prefix+'3_en_true" onChange="OptionsEnableDisable(this)" class="input" value="true">Yes<input autocomplete="off" autocapitalize="off" type="radio" name="yazfi_'+prefix+'3_enabled" id="yazfi_'+prefix+'3_en_false" onChange="OptionsEnableDisable(this)" class="input" value="false" checked>No</td>',tablehtml+="</tr>",tablehtml+="<tr>",tablehtml+='<td class="settingname"><a class="hintstyle" href="javascript:void(0);" onclick="YazHint(2);">IP Address</a></td><td class="settingvalue"><input autocomplete="off" autocapitalize="off" type="text" maxlength="15" class="input_20_table" name="yazfi_'+prefix+'1_ipaddr" value="0.0.0.0" onkeypress="return validator.isIPAddr(this,event)" onblur="Validate_IP(this,\'IP\')" data-lpignore="true" /></td>',tablehtml+='<td class="settingvalue"><input autocomplete="off" autocapitalize="off" type="text" maxlength="15" class="input_20_table" name="yazfi_'+prefix+'2_ipaddr" value="0.0.0.0" onkeypress="return validator.isIPAddr(this,event)" onblur="Validate_IP(this,\'IP\')" data-lpignore="true" /></td>',tablehtml+='<td class="settingvalue"><input autocomplete="off" autocapitalize="off" type="text" maxlength="15" class="input_20_table" name="yazfi_'+prefix+'3_ipaddr" value="0.0.0.0" onkeypress="return validator.isIPAddr(this,event)" onblur="Validate_IP(this,\'IP\')" data-lpignore="true" /></td>',tablehtml+="</tr>",tablehtml+="<tr>",tablehtml+='<td class="settingname"><a class="hintstyle" href="javascript:void(0);" onclick="YazHint(3);">'+theDHCPStart.uiLabel+'</a></td><td class="settingvalue"><input autocomplete="off" autocapitalize="off" type="text" maxlength="3" class="input_6_table" name="yazfi_'+prefix+"1_"+theDHCPStart.varName+'" value="2" onkeypress="return validator.isNumber(this,event)" onblur="Validate_DHCP(this,theDHCPStart.varType)" /></td>',tablehtml+='<td class="settingvalue"><input autocomplete="off" autocapitalize="off" type="text" maxlength="3" class="input_6_table" name="yazfi_'+prefix+"2_"+theDHCPStart.varName+'" value="2" onkeypress="return validator.isNumber(this,event)" onblur="Validate_DHCP(this,theDHCPStart.varType)" /></td>',tablehtml+='<td class="settingvalue"><input autocomplete="off" autocapitalize="off" type="text" maxlength="3" class="input_6_table" name="yazfi_'+prefix+"3_"+theDHCPStart.varName+'" value="2" onkeypress="return validator.isNumber(this,event)" onblur="Validate_DHCP(this,theDHCPStart.varType)" /></td>',tablehtml+="</tr>",tablehtml+="<tr>",tablehtml+='<td class="settingname"><a class="hintstyle" href="javascript:void(0);" onclick="YazHint(4);">'+theDHCPEnd.uiLabel+'</a></td><td class="settingvalue"><input autocomplete="off" autocapitalize="off" type="text" maxlength="3" class="input_6_table" name="yazfi_'+prefix+"1_"+theDHCPEnd.varName+'" value="254" onkeypress="return validator.isNumber(this,event)" onblur="Validate_DHCP(this,theDHCPEnd.varType)" /></td>',tablehtml+='<td class="settingvalue"><input autocomplete="off" autocapitalize="off" type="text" maxlength="3" class="input_6_table" name="yazfi_'+prefix+"2_"+theDHCPEnd.varName+'" value="254" onkeypress="return validator.isNumber(this,event)" onblur="Validate_DHCP(this,theDHCPEnd.varType)" /></td>',tablehtml+='<td class="settingvalue"><input autocomplete="off" autocapitalize="off" type="text" maxlength="3" class="input_6_table" name="yazfi_'+prefix+"3_"+theDHCPEnd.varName+'" value="254" onkeypress="return validator.isNumber(this,event)" onblur="Validate_DHCP(this,theDHCPEnd.varType)" /></td>',tablehtml+="</tr>",tablehtml+="<tr>",tablehtml+='<td class="settingname"><a class="hintstyle" href="javascript:void(0);" onclick="YazHint(5);">'+theDHCPLeaseTime.uiLabel+'</a></td><td class="settingvalue"><input autocomplete="off" autocapitalize="off" type="text" maxlength="7" class="input_12_table" name="yazfi_'+prefix+"1_"+theDHCPLeaseTime.varName+'" value="86400" onkeypress="return theDHCPLeaseTime.ValidateLeaseInput(this,event)" onblur="Validate_DHCP(this,theDHCPLeaseTime.varType)" /></td>',tablehtml+='<td class="settingvalue"><input autocomplete="off" autocapitalize="off" type="text" maxlength="7" class="input_12_table" name="yazfi_'+prefix+"2_"+theDHCPLeaseTime.varName+'" value="86400" onkeypress="return theDHCPLeaseTime.ValidateLeaseInput(this,event)" onblur="Validate_DHCP(this,theDHCPLeaseTime.varType)" /></td>',tablehtml+='<td class="settingvalue"><input autocomplete="off" autocapitalize="off" type="text" maxlength="7" class="input_12_table" name="yazfi_'+prefix+"3_"+theDHCPLeaseTime.varName+'" value="86400" onkeypress="return theDHCPLeaseTime.ValidateLeaseInput(this,event)" onblur="Validate_DHCP(this,theDHCPLeaseTime.varType)" /></td>',tablehtml+="</tr>",tablehtml+="<tr>",tablehtml+='<td class="settingname"><a class="hintstyle" href="javascript:void(0);" onclick="YazHint(6);">DNS Server 1</a></td><td class="settingvalue"><input autocomplete="off" autocapitalize="off" type="text" maxlength="15" class="input_20_table" name="yazfi_'+prefix+'1_dns1" value="0.0.0.0" onkeypress="return validator.isIPAddr(this,event)" onblur="Validate_IP(this,\'DNS\')" data-lpignore="true" /></td>',tablehtml+='<td class="settingvalue"><input autocomplete="off" autocapitalize="off" type="text" maxlength="15" class="input_20_table" name="yazfi_'+prefix+'2_dns1" value="0.0.0.0" onkeypress="return validator.isIPAddr(this,event)" onblur="Validate_IP(this,\'DNS\')" data-lpignore="true" /></td>',tablehtml+='<td class="settingvalue"><input autocomplete="off" autocapitalize="off" type="text" maxlength="15" class="input_20_table" name="yazfi_'+prefix+'3_dns1" value="0.0.0.0" onkeypress="return validator.isIPAddr(this,event)" onblur="Validate_IP(this,\'DNS\')" data-lpignore="true" /></td>',tablehtml+="</tr>",tablehtml+="<tr>",tablehtml+='<td class="settingname"><a class="hintstyle" href="javascript:void(0);" onclick="YazHint(7);">DNS Server 2</a></td><td class="settingvalue"><input autocomplete="off" autocapitalize="off" type="text" maxlength="15" class="input_20_table" name="yazfi_'+prefix+'1_dns2" value="0.0.0.0" onkeypress="return validator.isIPAddr(this,event)" onblur="Validate_IP(this,\'DNS\')" data-lpignore="true" /></td>',tablehtml+='<td class="settingvalue"><input autocomplete="off" autocapitalize="off" type="text" maxlength="15" class="input_20_table" name="yazfi_'+prefix+'2_dns2" value="0.0.0.0" onkeypress="return validator.isIPAddr(this,event)" onblur="Validate_IP(this,\'DNS\')" data-lpignore="true" /></td>',tablehtml+='<td class="settingvalue"><input autocomplete="off" autocapitalize="off" type="text" maxlength="15" class="input_20_table" name="yazfi_'+prefix+'3_dns2" value="0.0.0.0" onkeypress="return validator.isIPAddr(this,event)" onblur="Validate_IP(this,\'DNS\')" data-lpignore="true" /></td>',tablehtml+="</tr>",tablehtml+="<tr>",tablehtml+='<td class="settingname"><a class="hintstyle" href="javascript:void(0);" onclick="YazHint(8);">Force DNS</a></td><td class="settingvalue"><input autocomplete="off" autocapitalize="off" type="radio" name="yazfi_'+prefix+'1_forcedns" id="yazfi_'+prefix+'1_fdns_true" onChange="SubOptionsEnableDisable(this,\'dns\')" class="input" value="true">Yes<input autocomplete="off" autocapitalize="off" type="radio" name="yazfi_'+prefix+'1_forcedns" id="yazfi_'+prefix+'1_fdns_false" onChange="SubOptionsEnableDisable(this,\'dns\')" class="input" value="false" checked>No</td>',tablehtml+='<td class="settingvalue"><input autocomplete="off" autocapitalize="off" type="radio" name="yazfi_'+prefix+'2_forcedns" id="yazfi_'+prefix+'2_fdns_true" onChange="SubOptionsEnableDisable(this,\'dns\')" class="input" value="true">Yes<input autocomplete="off" autocapitalize="off" type="radio" name="yazfi_'+prefix+'2_forcedns" id="yazfi_'+prefix+'2_fdns_false" onChange="SubOptionsEnableDisable(this,\'dns\')" class="input" value="false" checked>No</td>',tablehtml+='<td class="settingvalue"><input autocomplete="off" autocapitalize="off" type="radio" name="yazfi_'+prefix+'3_forcedns" id="yazfi_'+prefix+'3_fdns_true" onChange="SubOptionsEnableDisable(this,\'dns\')" class="input" value="true">Yes<input autocomplete="off" autocapitalize="off" type="radio" name="yazfi_'+prefix+'3_forcedns" id="yazfi_'+prefix+'3_fdns_false" onChange="SubOptionsEnableDisable(this,\'dns\')" class="input" value="false" checked>No</td>',tablehtml+="</tr>",tablehtml+="<tr>",tablehtml+='<td class="settingname"><a class="hintstyle" href="javascript:void(0);" onclick="YazHint(9);">Allow Internet access</a></td><td class="settingvalue"><input autocomplete="off" autocapitalize="off" type="radio" name="yazfi_'+prefix+'1_allowinternet" id="yazfi_'+prefix+'1_allowinet_true" onChange="SubOptionsEnableDisable(this,\'allowinternet\')" class="input" value="true" checked>Yes<input autocomplete="off" autocapitalize="off" type="radio" name="yazfi_'+prefix+'1_allowinternet" id="yazfi_'+prefix+'1_allowinet_false" onChange="SubOptionsEnableDisable(this,\'allowinternet\')" class="input" value="false">No</td>',tablehtml+='<td class="settingvalue"><input autocomplete="off" autocapitalize="off" type="radio" name="yazfi_'+prefix+'2_allowinternet" id="yazfi_'+prefix+'2_allowinet_true" onChange="SubOptionsEnableDisable(this,\'allowinternet\')" class="input" value="true" checked>Yes<input autocomplete="off" autocapitalize="off" type="radio" name="yazfi_'+prefix+'2_allowinternet" id="yazfi_'+prefix+'2_allowinet_false" onChange="SubOptionsEnableDisable(this,\'allowinternet\')" class="input" value="false">No</td>',tablehtml+='<td class="settingvalue"><input autocomplete="off" autocapitalize="off" type="radio" name="yazfi_'+prefix+'3_allowinternet" id="yazfi_'+prefix+'3_allowinet_true" onChange="SubOptionsEnableDisable(this,\'allowinternet\')" class="input" value="true" checked>Yes<input autocomplete="off" autocapitalize="off" type="radio" name="yazfi_'+prefix+'3_allowinternet" id="yazfi_'+prefix+'3_allowinet_false" onChange="SubOptionsEnableDisable(this,\'allowinternet\')" class="input" value="false">No</td>',tablehtml+="</tr>",tablehtml+="<tr>",tablehtml+='<td class="settingname"><a class="hintstyle" href="javascript:void(0);" onclick="YazHint(10);">Redirect all to VPN</a></td><td class="settingvalue"><input autocomplete="off" autocapitalize="off" type="radio" name="yazfi_'+prefix+'1_redirectalltovpn" id="yazfi_'+prefix+'1_redir_true" onChange="SubOptionsEnableDisable(this,\'vpn\')" class="input" value="true">Yes<input autocomplete="off" autocapitalize="off" type="radio" name="yazfi_'+prefix+'1_redirectalltovpn" id="yazfi_'+prefix+'1_redir_false" onChange="SubOptionsEnableDisable(this,\'vpn\')" class="input" value="false" checked>No</td>',tablehtml+='<td class="settingvalue"><input autocomplete="off" autocapitalize="off" type="radio" name="yazfi_'+prefix+'2_redirectalltovpn" id="yazfi_'+prefix+'2_redir_true" onChange="SubOptionsEnableDisable(this,\'vpn\')" class="input" value="true">Yes<input autocomplete="off" autocapitalize="off" type="radio" name="yazfi_'+prefix+'2_redirectalltovpn" id="yazfi_'+prefix+'2_redir_false" onChange="SubOptionsEnableDisable(this,\'vpn\')" class="input" value="false" checked>No</td>',tablehtml+='<td class="settingvalue"><input autocomplete="off" autocapitalize="off" type="radio" name="yazfi_'+prefix+'3_redirectalltovpn" id="yazfi_'+prefix+'3_redir_true" onChange="SubOptionsEnableDisable(this,\'vpn\')" class="input" value="true">Yes<input autocomplete="off" autocapitalize="off" type="radio" name="yazfi_'+prefix+'3_redirectalltovpn" id="yazfi_'+prefix+'3_redir_false" onChange="SubOptionsEnableDisable(this,\'vpn\')" class="input" value="false" checked>No</td>',tablehtml+="</tr>",tablehtml+="<tr>",tablehtml+='<td class="settingname"><a class="hintstyle" href="javascript:void(0);" onclick="YazHint(11);">VPN Client No.</a></td><td class="settingvalue"><input autocomplete="off" autocapitalize="off" type="text" maxlength="1" class="input_6_table" name="yazfi_'+prefix+'1_vpnclientnumber" value="2" onkeypress="return validator.isNumber(this,event)" onblur="Validate_VPNClientNo(this)" /></td>',tablehtml+='<td class="settingvalue"><input autocomplete="off" autocapitalize="off" type="text" maxlength="1" class="input_6_table" name="yazfi_'+prefix+'2_vpnclientnumber" value="2" onkeypress="return validator.isNumber(this,event)" onblur="Validate_VPNClientNo(this)" /></td>',tablehtml+='<td class="settingvalue"><input autocomplete="off" autocapitalize="off" type="text" maxlength="1" class="input_6_table" name="yazfi_'+prefix+'3_vpnclientnumber" value="2" onkeypress="return validator.isNumber(this,event)" onblur="Validate_VPNClientNo(this)" /></td>',tablehtml+="</tr>",tablehtml+="<tr>",tablehtml+='<td class="settingname"><a class="hintstyle" href="javascript:void(0);" onclick="YazHint(12);">Two way to guest</a></td><td class="settingvalue"><input autocomplete="off" autocapitalize="off" type="radio" name="yazfi_'+prefix+'1_twowaytoguest" class="input" value="true" onchange="Validate_OneTwoWay(this)">Yes<input autocomplete="off" autocapitalize="off" type="radio" name="yazfi_'+prefix+'1_twowaytoguest" class="input" value="false" onchange="Validate_OneTwoWay(this)" checked>No</td>',tablehtml+='<td class="settingvalue"><input autocomplete="off" autocapitalize="off" type="radio" name="yazfi_'+prefix+'2_twowaytoguest" class="input" value="true" onchange="Validate_OneTwoWay(this)" >Yes<input autocomplete="off" autocapitalize="off" type="radio" name="yazfi_'+prefix+'2_twowaytoguest" class="input" value="false" onchange="Validate_OneTwoWay(this)" checked>No</td>',tablehtml+='<td class="settingvalue"><input autocomplete="off" autocapitalize="off" type="radio" name="yazfi_'+prefix+'3_twowaytoguest" class="input" value="true" onchange="Validate_OneTwoWay(this)" >Yes<input autocomplete="off" autocapitalize="off" type="radio" name="yazfi_'+prefix+'3_twowaytoguest" class="input" value="false" onchange="Validate_OneTwoWay(this)" checked>No</td>',tablehtml+="</tr>",tablehtml+="<tr>",tablehtml+='<td class="settingname"><a class="hintstyle" href="javascript:void(0);" onclick="YazHint(13);">One way to guest</a></td><td class="settingvalue"><input autocomplete="off" autocapitalize="off" type="radio" name="yazfi_'+prefix+'1_onewaytoguest" class="input" value="true" onchange="Validate_OneTwoWay(this)" >Yes<input autocomplete="off" autocapitalize="off" type="radio" name="yazfi_'+prefix+'1_onewaytoguest" class="input" value="false" onchange="Validate_OneTwoWay(this)" checked>No</td>',tablehtml+='<td class="settingvalue"><input autocomplete="off" autocapitalize="off" type="radio" name="yazfi_'+prefix+'2_onewaytoguest" class="input" value="true" onchange="Validate_OneTwoWay(this)" >Yes<input autocomplete="off" autocapitalize="off" type="radio" name="yazfi_'+prefix+'2_onewaytoguest" class="input" value="false" onchange="Validate_OneTwoWay(this)" checked>No</td>',tablehtml+='<td class="settingvalue"><input autocomplete="off" autocapitalize="off" type="radio" name="yazfi_'+prefix+'3_onewaytoguest" class="input" value="true" onchange="Validate_OneTwoWay(this)" >Yes<input autocomplete="off" autocapitalize="off" type="radio" name="yazfi_'+prefix+'3_onewaytoguest" class="input" value="false" onchange="Validate_OneTwoWay(this)" checked>No</td>',tablehtml+="</tr>",tablehtml+="<tr>",tablehtml+='<td class="settingname"><a class="hintstyle" href="javascript:void(0);" onclick="YazHint(14);">Client isolation</a></td><td class="settingvalue"><input autocomplete="off" autocapitalize="off" type="radio" name="yazfi_'+prefix+'1_clientisolation" class="input" value="true">Yes<input autocomplete="off" autocapitalize="off" type="radio" name="yazfi_'+prefix+'1_clientisolation" class="input" value="false" checked>No</td>',tablehtml+='<td class="settingvalue"><input autocomplete="off" autocapitalize="off" type="radio" name="yazfi_'+prefix+'2_clientisolation" class="input" value="true">Yes<input autocomplete="off" autocapitalize="off" type="radio" name="yazfi_'+prefix+'2_clientisolation" class="input" value="false" checked>No</td>',tablehtml+='<td class="settingvalue"><input autocomplete="off" autocapitalize="off" type="radio" name="yazfi_'+prefix+'3_clientisolation" class="input" value="true" >Yes<input autocomplete="off" autocapitalize="off" type="radio" name="yazfi_'+prefix+'3_clientisolation" class="input" value="false" checked>No</td>',tablehtml+="</tr>",tablehtml+="</table>",tablehtml+="</td>",tablehtml+="</tr>",tablehtml+="</table>",tablehtml+="</td></tr>",tablehtml}function SetCurrentPage(){document.form.next_page.value=window.location.pathname.substring(1),document.form.current_page.value=window.location.pathname.substring(1)}function ScriptUpdateLayout(){var e=GetVersionNumber("local"),t=GetVersionNumber("server");$("#yazfi_version_local").text(e),e!=t&&"N/A"!=t&&($("#yazfi_version_server").text("Updated version available: "+t),showhide("btnChkUpdate",!1),showhide("yazfi_version_server",!0),showhide("btnDoUpdate",!0))}function update_status(){$.ajax({url:"/ext/YazFi/detect_update.js",dataType:"script",error:function(e){setTimeout(update_status,1e3)},success:function(){"InProgress"==updatestatus?setTimeout(update_status,1e3):(document.getElementById("imgChkUpdate").style.display="none",showhide("yazfi_version_server",!0),"None"!=updatestatus?($("#yazfi_version_server").text("Updated version available: "+updatestatus),showhide("btnChkUpdate",!1),showhide("btnDoUpdate",!0)):($("#yazfi_version_server").text("No update available"),showhide("btnChkUpdate",!0),showhide("btnDoUpdate",!1)))}})}function CheckUpdate(){showhide("btnChkUpdate",!1),document.formScriptActions.action_script.value="start_YazFicheckupdate",document.formScriptActions.submit(),document.getElementById("imgChkUpdate").style.display="",setTimeout(update_status,2e3)}function DoUpdate(){$("#auto_refresh").prop("checked",!1),clearTimeout(tout),document.form.action_script.value="start_YazFidoupdate",document.form.action_wait.value=45,showLoading(),document.form.submit()}function GetVersionNumber(e){var t;return"local"==e?t=custom_settings.yazfi_version_local:"server"==e&&(t=custom_settings.yazfi_version_server),void 0===t||null==t?"N/A":t}function GetCookie(e,t){return null!=cookie.get("yazfi_"+e)?cookie.get("yazfi_"+e):"string"==t?"":"number"==t?0:void 0}function SetCookie(e,t){cookie.set("yazfi_"+e,t,3650)}function SaveConfig(){if(!Validate_All())return!1;$("[name*=yazfi_]").prop("disabled",!1),document.getElementById("amng_custom").value=JSON.stringify($("form").serializeObject()),document.form.action_script.value="start_YazFi",document.form.action_wait.value=45,$("#auto_refresh").prop("checked",!1),clearTimeout(tout),showLoading(),document.form.submit()}function AddEventHandlers(){$(".collapsible-jquery").off("click").on("click",(function(){$(this).siblings().toggle("fast",(function(){"none"==$(this).css("display")?SetCookie($(this).siblings()[0].id,"collapsed"):SetCookie($(this).siblings()[0].id,"expanded")}))})),$(".collapsible-jquery").each((function(e,t){"collapsed"==GetCookie($(this)[0].id,"string")?$(this).siblings().toggle(!1):$(this).siblings().toggle(!0)})),$("#auto_refresh").off("click").on("click",(function(){ToggleRefresh()}))}function ToggleRefresh(){1==$("#auto_refresh").prop("checked")?(document.formScriptActions.action_script.value="start_YazFiconnectedclients",document.formScriptActions.submit(),tout=setTimeout(get_connected_clients_file,5e3)):clearTimeout(tout)}function StoHHMMSS(e){var t=parseInt(e,10);return[Math.floor(t/3600),Math.floor(t/60)%60,t%60].map((e=>e<10?"0"+e:e)).filter(((e,t)=>"00"!==e||t>0)).join(":")}function HHMMSStoS(e){for(var t=e.split(":"),a=0,i=1;t.length>0;)a+=i*parseInt(t.pop(),10),i*=60;return a}$.fn.serializeObject=function(){var e=custom_settings,t=this.serializeArray();return $.each(t,(function(){void 0!==e[this.name]&&-1!=this.name.indexOf("yazfi")&&-1==this.name.indexOf("version")?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):-1!=this.name.indexOf("yazfi")&&-1==this.name.indexOf("version")&&(e[this.name]=this.value||"")})),e};

</script>
</head>
<body onload="initial();" onunload="return unload_body();">
<div id="TopBanner"></div>
<div id="Loading" class="popup_bg"></div>
<iframe name="hidden_frame" id="hidden_frame" src="about:blank" width="0" height="0" frameborder="0"></iframe>
<form method="post" name="form" id="ruleForm" action="/start_apply.htm" target="hidden_frame">
<input type="hidden" name="current_page" value="">
<input type="hidden" name="next_page" value="">
<input type="hidden" name="modified" value="0">
<input type="hidden" name="action_mode" value="apply">
<input type="hidden" name="action_wait" value="30">
<input type="hidden" name="first_time" value="">
<input type="hidden" name="SystemCmd" value="">
<input type="hidden" name="action_script" value="start_YazFi">
<input type="hidden" name="preferred_lang" id="preferred_lang" value="<% nvram_get("preferred_lang"); %>">
<input type="hidden" name="firmver" value="<% nvram_get("firmver"); %>">
<input type="hidden" name="lan_ipaddr" value="<% nvram_get("lan_ipaddr"); %>">
<input type="hidden" name="lan_netmask" value="<% nvram_get("lan_netmask"); %>">
<input type="hidden" name="wl01_ssid" value="<% nvram_get("wl0.1_ssid"); %>">
<input type="hidden" name="wl02_ssid" value="<% nvram_get("wl0.2_ssid"); %>">
<input type="hidden" name="wl03_ssid" value="<% nvram_get("wl0.3_ssid"); %>">
<input type="hidden" name="wl11_ssid" value="<% nvram_get("wl1.1_ssid"); %>">
<input type="hidden" name="wl12_ssid" value="<% nvram_get("wl1.2_ssid"); %>">
<input type="hidden" name="wl13_ssid" value="<% nvram_get("wl1.3_ssid"); %>">
<input type="hidden" name="wl21_ssid" value="<% nvram_get("wl2.1_ssid"); %>">
<input type="hidden" name="wl22_ssid" value="<% nvram_get("wl2.2_ssid"); %>">
<input type="hidden" name="wl23_ssid" value="<% nvram_get("wl2.3_ssid"); %>">
<input type="hidden" name="wl31_ssid" value="<% nvram_get("wl3.1_ssid"); %>">
<input type="hidden" name="wl32_ssid" value="<% nvram_get("wl3.2_ssid"); %>">
<input type="hidden" name="wl33_ssid" value="<% nvram_get("wl3.3_ssid"); %>">
<input type="hidden" name="wl01_bss_enabled" value="<% nvram_get("wl0.1_bss_enabled"); %>">
<input type="hidden" name="wl02_bss_enabled" value="<% nvram_get("wl0.2_bss_enabled"); %>">
<input type="hidden" name="wl03_bss_enabled" value="<% nvram_get("wl0.3_bss_enabled"); %>">
<input type="hidden" name="wl11_bss_enabled" value="<% nvram_get("wl1.1_bss_enabled"); %>">
<input type="hidden" name="wl12_bss_enabled" value="<% nvram_get("wl1.2_bss_enabled"); %>">
<input type="hidden" name="wl13_bss_enabled" value="<% nvram_get("wl1.3_bss_enabled"); %>">
<input type="hidden" name="wl21_bss_enabled" value="<% nvram_get("wl2.1_bss_enabled"); %>">
<input type="hidden" name="wl22_bss_enabled" value="<% nvram_get("wl2.2_bss_enabled"); %>">
<input type="hidden" name="wl23_bss_enabled" value="<% nvram_get("wl2.3_bss_enabled"); %>">
<input type="hidden" name="wl31_bss_enabled" value="<% nvram_get("wl3.1_bss_enabled"); %>">
<input type="hidden" name="wl32_bss_enabled" value="<% nvram_get("wl3.2_bss_enabled"); %>">
<input type="hidden" name="wl33_bss_enabled" value="<% nvram_get("wl3.3_bss_enabled"); %>">
<input type="hidden" name="amng_custom" id="amng_custom" value="">
<table class="content" align="center" cellpadding="0" cellspacing="0">
<tr>
<td width="17">&nbsp;</td>
<td valign="top" width="202">
<div id="mainMenu"></div>
<div id="subMenu"></div></td>
<td valign="top">
<div id="tabMenu" class="submenuBlock"></div>
<table width="98%" border="0" align="left" cellpadding="0" cellspacing="0">
<tr>
<td align="left" valign="top">
<table width="760px" border="0" cellpadding="5" cellspacing="0" bordercolor="#6b8fa3" class="FormTitle" id="FormTitle">
<tr>
<td bgcolor="#4D595D" colspan="3" valign="top">
<div>&nbsp;</div>
<div class="formfonttitle" id="scripttitle" style="text-align:center;">YazFi</div>
<div style="margin:10px 0 10px 5px;" class="splitLine"></div>
<div class="formfontdesc">Feature expansion of guest WiFi networks on AsusWRT-Merlin, including SSID -> VPN, separate subnets per guest network, pinhole access to LAN resources (e.g. DNS) and more!</div>
<table width="100%" border="1" align="center" cellpadding="2" cellspacing="0" bordercolor="#6b8fa3" class="FormTable" style="border:0px;" id="table_utilities">
<thead class="collapsible-jquery" id="thead_utilities">
<tr><td colspan="2">Utilities (click to expand/collapse)</td></tr>
</thead>
<tr>
<th width="20%">Version information</th>
<td>
<span id="yazfi_version_local" style="color:#FFFFFF;"></span>
&nbsp;&nbsp;&nbsp;
<span id="yazfi_version_server" style="display:none;">Update version</span>
&nbsp;&nbsp;&nbsp;
<input type="button" class="button_gen" onclick="CheckUpdate();" value="Check" id="btnChkUpdate">
<img id="imgChkUpdate" style="display:none;vertical-align:middle;" src="images/InternetScan.gif"/>
<input type="button" class="button_gen" onclick="DoUpdate();" value="Update" id="btnDoUpdate" style="display:none;">
&nbsp;&nbsp;&nbsp;
</td>
</tr>
</table>
<div style="line-height:10px;">&nbsp;</div>
<table width="100%" border="1" align="center" cellpadding="2" cellspacing="0" bordercolor="#6b8fa3" class="FormTable" style="border:1px;">
<thead class="collapsible-jquery" id="thead_connectedclients">
<tr><td colspan="2">Connected Guests (click to expand/collapse)</td></tr>
</thead>
<tr class="even">
<th style="width:35%;">Update automatically?</th>
<td>
<label style="color:#FFCC00;display:block;">
<input type="checkbox" checked="" id="auto_refresh" style="padding:0;margin:0;vertical-align:middle;position:relative;top:-1px;" />&nbsp;&nbsp;Table will refresh every 5s</label>
</td>
</tr>
<tr><td colspan="2" style="padding:0px;">
<table width="100%" border="0" align="center" cellpadding="2" cellspacing="0" bordercolor="#6b8fa3" class="FormTable" style="border:1px;" id="table_connectedclients">
</table>
</td></tr>
</table>
<div style="line-height:10px;">&nbsp;</div>
<table width="100%" border="1" align="center" cellpadding="2" cellspacing="0" bordercolor="#6b8fa3" class="FormTable" style="border:1px;" id="table_config">
<thead class="collapsible-jquery" id="thead_config">
<tr><td colspan="2">Guest Network Configuration (click to expand/collapse)</td></tr>
</thead>
</table>
</td>
</tr>
</table>
</td>
</tr>
</table>
</td>
</tr>
</table>
</form>
<form method="post" name="formScriptActions" action="/start_apply.htm" target="hidden_frame">
<input type="hidden" name="productid" value="<% nvram_get("productid"); %>">
<input type="hidden" name="current_page" value="">
<input type="hidden" name="next_page" value="">
<input type="hidden" name="action_mode" value="apply">
<input type="hidden" name="action_script" value="">
<input type="hidden" name="action_wait" value="">
</form>
<div id="footer"></div>
</body>
</html>
